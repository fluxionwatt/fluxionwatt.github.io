import{_ as e,c as a,o as l,ah as i}from"./chunks/framework.BDBjiFeZ.js";const m=JSON.parse('{"title":"Performance Test Report","description":"","frontmatter":{"sidebar_position":4},"headers":[],"relativePath":"en_US/introduction/test_report.md","filePath":"en_US/introduction/test_report.md"}'),r={name:"en_US/introduction/test_report.md"};function s(n,t,o,d,c,g){return l(),a("div",null,[...t[0]||(t[0]=[i('<h1 id="performance-test-report" tabindex="-1">Performance Test Report <a class="header-anchor" href="#performance-test-report" aria-label="Permalink to “Performance Test Report”">​</a></h1><h2 id="comprehensive-performance-analysis-report-on-raspberry-pi" tabindex="-1">Comprehensive Performance Analysis Report on Raspberry Pi <a class="header-anchor" href="#comprehensive-performance-analysis-report-on-raspberry-pi" aria-label="Permalink to “Comprehensive Performance Analysis Report on Raspberry Pi”">​</a></h2><h3 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to “Conclusion”">​</a></h3><p><strong>ThingsPanel can run stably on a Raspberry Pi with 2GB RAM, making it suitable for small to medium-scale IoT application scenarios.</strong> Tests indicate that the system can handle continuous writing of approximately 700 data points per second, which is sufficient to stably support 5 devices reporting every 100ms, or <strong>20,000 temperature and humidity sensors reporting data at a 1-minute frequency</strong>. <strong>The main performance bottleneck is Storage I/O, not CPU or Memory</strong>, especially when using a standard Class 10 TF card. By optimizing the storage medium (e.g., using an A2-rated SD card or external SSD), system performance has room for a 10-30x improvement. Overall, Raspberry Pi is a cost-effective choice for deploying ThingsPanel, providing a viable solution for Edge Computing IoT applications.</p><h3 id="test-methodology" tabindex="-1">Test Methodology <a class="header-anchor" href="#test-methodology" aria-label="Permalink to “Test Methodology”">​</a></h3><p>This test combined multi-dimensional resource monitoring with actual load testing to comprehensively evaluate ThingsPanel&#39;s performance on Raspberry Pi:</p><ol><li><p><strong>System Resource Monitoring</strong>:</p><ul><li>Used custom script <code>monitor_thingspanel.sh</code> to monitor CPU, memory, and component usage in real-time.</li><li>Used <code>pg_io_monitor.sh</code> specifically to monitor disk I/O performance, focusing on database partitions.</li><li>Sampling interval of 1 second.</li></ul></li><li><p><strong>Load Testing</strong>:</p><ul><li>Simulated 10 concurrent IoT device connections, sending data to the system via MQTT protocol.</li><li>Target data transmission rate was approx. 989 points/sec, lasting for 200 cycles.</li><li>Verified data write success rate and performance via database queries.</li></ul></li><li><p><strong>Performance Analysis</strong>:</p><ul><li>Compared resource usage differences between idle and loaded states.</li><li>Identified system bottleneck points and their impact.</li><li>Analyzed resource consumption characteristics of components (PostgreSQL, Redis, GMQTT, etc.).</li></ul></li></ol><h3 id="test-environment" tabindex="-1">Test Environment <a class="header-anchor" href="#test-environment" aria-label="Permalink to “Test Environment”">​</a></h3><ul><li><p><strong>Hardware Platform</strong>:</p><ul><li>Raspberry Pi 4</li><li>CPU: 4-Core ARM Processor (aarch64)</li><li>Memory: 1849MB (~2GB)</li><li>Storage: Class 10 TF Card, Root partition usage ~94%</li></ul></li><li><p><strong>Software Environment</strong>:</p><ul><li>OS: Raspbian GNU/Linux 11 (bullseye)</li><li>ThingsPanel Components: <ul><li>PostgreSQL/TimescaleDB (Docker)</li><li>Redis (Docker)</li><li>GMQTT (PM2 managed)</li><li>Backend API (PM2 managed)</li><li>Nginx (System Service)</li></ul></li></ul></li><li><p><strong>Test Tools</strong>:</p><ul><li>Custom Resource Monitoring Scripts</li><li>MQTT Performance Test Client (Go)</li><li>DB Monitoring Query Scripts</li></ul></li></ul><h3 id="resource-usage-summary" tabindex="-1">Resource Usage Summary <a class="header-anchor" href="#resource-usage-summary" aria-label="Permalink to “Resource Usage Summary”">​</a></h3><h4 id="idle-state-no-data-writes" tabindex="-1">Idle State (No Data Writes) <a class="header-anchor" href="#idle-state-no-data-writes" aria-label="Permalink to “Idle State (No Data Writes)”">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Metric</th><th style="text-align:left;">Usage Rate</th><th style="text-align:left;">Actual Usage</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Total CPU</strong></td><td style="text-align:left;">4.2% - 7.4%</td><td style="text-align:left;">Max ~7.4% on single core</td></tr><tr><td style="text-align:left;"><strong>Total Memory</strong></td><td style="text-align:left;">~35.2%</td><td style="text-align:left;">~651MB</td></tr><tr><td style="text-align:left;"><strong>Disk Write</strong></td><td style="text-align:left;">0 - 0.07MB/s</td><td style="text-align:left;">Almost None</td></tr><tr><td style="text-align:left;"><strong>ThingsPanel CPU</strong></td><td style="text-align:left;">~2.2%</td><td style="text-align:left;">~2.2% single core</td></tr><tr><td style="text-align:left;"><strong>ThingsPanel Memory</strong></td><td style="text-align:left;">~21.2%</td><td style="text-align:left;">~436MB</td></tr></tbody></table><h4 id="load-state-high-volume-data-writes" tabindex="-1">Load State (High Volume Data Writes) <a class="header-anchor" href="#load-state-high-volume-data-writes" aria-label="Permalink to “Load State (High Volume Data Writes)”">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Metric</th><th style="text-align:left;">Usage Rate</th><th style="text-align:left;">Actual Usage</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Total CPU</strong></td><td style="text-align:left;">92.3% - 94.1%</td><td style="text-align:left;">Single core saturated</td></tr><tr><td style="text-align:left;"><strong>Total Memory</strong></td><td style="text-align:left;">36.4% - 36.9%</td><td style="text-align:left;">~682MB</td></tr><tr><td style="text-align:left;"><strong>Disk Write (mmcblk0p2)</strong></td><td style="text-align:left;">2.3 - 7.1MB/s</td><td style="text-align:left;">Peak 7.1MB/s</td></tr><tr><td style="text-align:left;"><strong>ThingsPanel CPU</strong></td><td style="text-align:left;">82.3% - 113.2%</td><td style="text-align:left;">&gt;100% of a single core</td></tr><tr><td style="text-align:left;"><strong>ThingsPanel Memory</strong></td><td style="text-align:left;">28.0% - 30.9%</td><td style="text-align:left;">566MB - 621MB</td></tr></tbody></table><h3 id="component-resource-analysis" tabindex="-1">Component Resource Analysis <a class="header-anchor" href="#component-resource-analysis" aria-label="Permalink to “Component Resource Analysis”">​</a></h3><h4 id="postgresql-database" tabindex="-1">PostgreSQL Database <a class="header-anchor" href="#postgresql-database" aria-label="Permalink to “PostgreSQL Database”">​</a></h4><ul><li><strong>Idle</strong> - CPU: ~0%, Memory: 13.2% (267.3MB), Disk Write: ~0</li><li><strong>Load</strong> - CPU: 80.1% - 111.0%, Memory: 19.9% - 22.8% (396MB - 451MB), Disk Write: 2.3 - 7.1MB/s</li><li><strong>Characteristics</strong>: <ul><li>Main consumer of CPU, Memory, and Disk I/O.</li><li>CPU utilization can exceed single-core capacity under load.</li><li>Data writing generates heavy Disk I/O, the system bottleneck.</li></ul></li></ul><h4 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to “Redis”">​</a></h4><ul><li><strong>Idle/Load</strong> - CPU: ~1.6%, Memory: 0.4% (18.7MB), I/O negligible.</li><li><strong>Characteristics</strong>: Stable resource usage.</li></ul><h4 id="gmqtt-mqtt-broker" tabindex="-1">GMQTT (MQTT Broker) <a class="header-anchor" href="#gmqtt-mqtt-broker" aria-label="Permalink to “GMQTT (MQTT Broker)”">​</a></h4><ul><li><strong>Idle/Load</strong> - CPU: ~0%, Memory: 0.1% (2.5MB), I/O negligible.</li><li><strong>Characteristics</strong>: Extremely low resource usage, stable even under frequent MQTT messaging.</li></ul><h4 id="backend-api" tabindex="-1">Backend API <a class="header-anchor" href="#backend-api" aria-label="Permalink to “Backend API”">​</a></h4><ul><li><strong>Idle/Load</strong> - CPU: ~0%, Memory: 0.1% (2.7MB).</li><li><strong>Characteristics</strong>: Low usage, mainly coordinating data flow.</li></ul><h4 id="nginx" tabindex="-1">Nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to “Nginx”">​</a></h4><ul><li><strong>Idle/Load</strong> - Stable, lightweight. Memory ~0.9%.</li></ul><h4 id="nodejs-pm2" tabindex="-1">NodeJS/PM2 <a class="header-anchor" href="#nodejs-pm2" aria-label="Permalink to “NodeJS/PM2”">​</a></h4><ul><li><strong>Idle/Load</strong> - Memory ~6.5% (127MB), CPU Low.</li><li><strong>Characteristics</strong>: Moderate memory usage.</li></ul><h3 id="disk-i-o-performance-analysis" tabindex="-1">Disk I/O Performance Analysis <a class="header-anchor" href="#disk-i-o-performance-analysis" aria-label="Permalink to “Disk I/O Performance Analysis”">​</a></h3><ol><li><p><strong>I/O Load Correlates with CPU Load</strong>:</p><ul><li>During CPU peaks (90%+), partition write speed is stable at 2.3-3.0 MB/s.</li><li>Peak moments reach 7.1 MB/s.</li></ul></li><li><p><strong>Storage Performance</strong>:</p><ul><li>Class 10 TF Card random write performance is a system bottleneck.</li><li>Peak 7.1MB/s is close to the Class 10 random write limit.</li><li>High partition usage (94%) may negatively affect write performance.</li></ul></li><li><p><strong>Database I/O Characteristics</strong>:</p><ul><li>PostgreSQL generates almost all disk writes.</li><li>Write pattern is bursty but stable during load.</li></ul></li></ol><h3 id="load-test-analysis" tabindex="-1">Load Test Analysis <a class="header-anchor" href="#load-test-analysis" aria-label="Permalink to “Load Test Analysis”">​</a></h3><ol><li><p><strong>Data Write Capability</strong>:</p><ul><li>System handled approx. 989 points/sec write rate.</li><li>Peak handling capability observed at ~710 points/sec DB write rate during stress.</li></ul></li><li><p><strong>System Response</strong>:</p><ul><li>CPU usage spikes to &gt;90% under high frequency writes.</li><li>PostgreSQL is the main resource hog.</li><li>Memory usage remains stable (+1.7% increase).</li></ul></li></ol><h3 id="key-bottleneck-identification" tabindex="-1">Key Bottleneck Identification <a class="header-anchor" href="#key-bottleneck-identification" aria-label="Permalink to “Key Bottleneck Identification”">​</a></h3><ol><li><p><strong>Primary Bottleneck - Storage I/O</strong>:</p><ul><li>Class 10 TF Card random write speed hits the limit.</li><li>Peak 7.1MB/s.</li><li>Major factor affecting stability under high throughput.</li></ul></li><li><p><strong>Secondary Bottleneck - CPU</strong>:</p><ul><li>PostgreSQL exceeds 100% CPU (single core) under high load.</li><li>Multi-core utilization helps.</li></ul></li><li><p><strong>Non-Bottleneck - Memory</strong>:</p><ul><li>2GB RAM has plenty of headroom.</li></ul></li></ol><h3 id="conclusion-recommendations" tabindex="-1">Conclusion &amp; Recommendations <a class="header-anchor" href="#conclusion-recommendations" aria-label="Permalink to “Conclusion &amp; Recommendations”">​</a></h3><h4 id="overall-assessment" tabindex="-1">Overall Assessment <a class="header-anchor" href="#overall-assessment" aria-label="Permalink to “Overall Assessment”">​</a></h4><p>ThingsPanel performs well on Raspberry Pi (2GB) for small/medium IoT needs:</p><ol><li><strong>Feasibility</strong>: Stable operation on 2GB RAM.</li><li><strong>Performance</strong>: Sustainable ~600-700 points/sec.</li><li><strong>Efficiency</strong>: Low idle consumption.</li><li><strong>Scalability</strong>: Stable memory usage under load.</li></ol><h4 id="optimization-recommendations" tabindex="-1">Optimization Recommendations <a class="header-anchor" href="#optimization-recommendations" aria-label="Permalink to “Optimization Recommendations”">​</a></h4><p><strong>Storage Optimization (Priority 1)</strong>:</p><ul><li>Use A2-class SD cards or external SSD via USB 3.0.</li><li>Clean up root partition.</li><li>Move PostgreSQL data directory to faster storage.</li></ul><p><strong>SD Card vs. SSD Performance Comparison</strong></p><table tabindex="0"><thead><tr><th style="text-align:left;">Metric</th><th style="text-align:left;">Class 10 SD Card</th><th style="text-align:left;">SSD (USB 3.0)</th><th style="text-align:left;">Improvement</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Random Write Speed</strong></td><td style="text-align:left;">2-7 MB/s</td><td style="text-align:left;"><strong>80-300 MB/s</strong></td><td style="text-align:left;"><strong>10-30x</strong></td></tr><tr><td style="text-align:left;">Data Processing</td><td style="text-align:left;">~700 pts/s</td><td style="text-align:left;">3,500-10,000 pts/s</td><td style="text-align:left;">5-15x</td></tr><tr><td style="text-align:left;">DB Query Response</td><td style="text-align:left;">Slow</td><td style="text-align:left;">Significantly Faster</td><td style="text-align:left;">5-15x</td></tr><tr><td style="text-align:left;">CPU Usage (High Load)</td><td style="text-align:left;">90-110%</td><td style="text-align:left;">30-50%</td><td style="text-align:left;">Reduced by 60-70%</td></tr><tr><td style="text-align:left;">Stability</td><td style="text-align:left;">Bottleneck</td><td style="text-align:left;">Greatly Improved</td><td style="text-align:left;">Qualitative Leap</td></tr></tbody></table><h3 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to “Summary”">​</a></h3><p>ThingsPanel is viable on ARM devices like Raspberry Pi, effectively supporting edge IoT scenarios. The main bottleneck is Storage I/O. With proper storage optimization, performance can be significantly boosted. For larger deployments, Raspberry Pi 4GB+ version with High Performance Storage is recommended.</p><h2 id="cloud-server-test-report" tabindex="-1">Cloud Server Test Report <a class="header-anchor" href="#cloud-server-test-report" aria-label="Permalink to “Cloud Server Test Report”">​</a></h2><h3 id="core-conclusion" tabindex="-1">Core Conclusion <a class="header-anchor" href="#core-conclusion" aria-label="Permalink to “Core Conclusion”">​</a></h3><p>ThingsPanel New Architecture performs excellently in a 10,000 device concurrent scenario:</p><ul><li>Single Cluster supports 25,000 writes/sec, CPU peak &lt; 82%.</li><li>Stable metrics under high concurrency, no delays/backlogs.</li><li>Estimated support for <strong>400,000 devices</strong> (at 4 points/min/device) with current hardware.</li></ul><h3 id="_1-test-background" tabindex="-1">1. Test Background <a class="header-anchor" href="#_1-test-background" aria-label="Permalink to “1. Test Background”">​</a></h3><p>Validating concurrency capability of the new architecture using a 3-node cluster.</p><h3 id="_2-test-environment" tabindex="-1">2. Test Environment <a class="header-anchor" href="#_2-test-environment" aria-label="Permalink to “2. Test Environment”">​</a></h3><h4 id="server-config" tabindex="-1">Server Config <a class="header-anchor" href="#server-config" aria-label="Permalink to “Server Config”">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Type</th><th style="text-align:left;">CPU</th><th style="text-align:left;">RAM</th><th style="text-align:left;">Disk</th><th style="text-align:left;">Role</th></tr></thead><tbody><tr><td style="text-align:left;">Server 1</td><td style="text-align:left;">Intel Xeon Platinum 8269CY @ 2.50GHz (4 Core)</td><td style="text-align:left;">8GB</td><td style="text-align:left;">ESSD PL0 40GiB (2280 IOPS)</td><td style="text-align:left;">DB, Broker</td></tr><tr><td style="text-align:left;">Server 2</td><td style="text-align:left;">Intel Xeon Platinum 8269CY @ 2.50GHz (4 Core)</td><td style="text-align:left;">8GB</td><td style="text-align:left;">ESSD PL0 40GiB (2280 IOPS)</td><td style="text-align:left;">DB, Broker</td></tr><tr><td style="text-align:left;">Server 3</td><td style="text-align:left;">Intel Xeon Platinum 8269CY @ 2.50GHz (4 Core)</td><td style="text-align:left;">8GB</td><td style="text-align:left;">ESSD PL0 40GiB (2280 IOPS)</td><td style="text-align:left;">App Platform, DB, LB</td></tr></tbody></table><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to “Parameters”">​</a></h4><ul><li>Device Count: 5,000 / 10,000</li><li>Frequency: 16 points per 6.4 seconds per device.</li><li>Duration: 24 Hours.</li></ul><h3 id="_3-test-results" tabindex="-1">3. Test Results <a class="header-anchor" href="#_3-test-results" aria-label="Permalink to “3. Test Results”">​</a></h3><h4 id="performance-metrics" tabindex="-1">Performance Metrics <a class="header-anchor" href="#performance-metrics" aria-label="Permalink to “Performance Metrics”">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">Device Count</th><th style="text-align:left;">Write Speed</th><th style="text-align:left;">CPU Usage (%)</th><th style="text-align:left;">Memory Usage (%)</th><th style="text-align:left;">Intranet Bandwidth</th><th style="text-align:left;">Disk R/W</th></tr></thead><tbody><tr><td style="text-align:left;">5,000</td><td style="text-align:left;">12,000/s</td><td style="text-align:left;">36 / 37 / 40</td><td style="text-align:left;">35 / 37 / 17</td><td style="text-align:left;">25M</td><td style="text-align:left;">38M</td></tr><tr><td style="text-align:left;">10,000</td><td style="text-align:left;">25,000/s</td><td style="text-align:left;">72 / 73 / 82</td><td style="text-align:left;">45 / 48 / 17</td><td style="text-align:left;">48M</td><td style="text-align:left;">76M</td></tr></tbody></table><h4 id="stability" tabindex="-1">Stability <a class="header-anchor" href="#stability" aria-label="Permalink to “Stability”">​</a></h4><ul><li><strong>Throughput</strong>: 25,000 writes/sec sustained.</li><li><strong>Response Time</strong>: Web Ops &lt; 200ms.</li><li><strong>Queue</strong>: No backlog.</li><li><strong>Query</strong>: History Data &lt; 500ms.</li></ul><h3 id="_4-analysis" tabindex="-1">4. Analysis <a class="header-anchor" href="#_4-analysis" aria-label="Permalink to “4. Analysis”">​</a></h3><ol><li><strong>Capacity</strong>: 82% CPU at 25k/s writes indicates remaining headroom.</li><li><strong>Efficiency</strong>: CPU scales linearly. Memory management is efficient. Disk I/O is within limits.</li><li><strong>Network</strong>: Low latency, efficient cluster communication.</li></ol><h4 id="scalability-assessment" tabindex="-1">Scalability Assessment <a class="header-anchor" href="#scalability-assessment" aria-label="Permalink to “Scalability Assessment”">​</a></h4><ol><li><strong>Single Cluster</strong>: Supports ~400k devices theoretically.</li><li><strong>Horizontal Scale</strong>: Can scale to millions linearly.</li><li><strong>Bottleneck</strong>: CPU is the primary bottleneck.</li></ol><h3 id="_5-recommendations" tabindex="-1">5. Recommendations <a class="header-anchor" href="#_5-recommendations" aria-label="Permalink to “5. Recommendations”">​</a></h3><ol><li><strong>Hardware</strong>: Upgrade to 8-Core CPUs; Use higher performance ESSD.</li><li><strong>Software</strong>: Optimize batch writing; Implement smart Load Balancing.</li></ol><h3 id="conclusion-1" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion-1" aria-label="Permalink to “Conclusion”">​</a></h3><p>The test confirms that ThingsPanel architecture has excellent concurrency and scalability. A mid-range configuration can stably support tens of thousands of devices, laying a foundation for large-scale IoT applications.</p>',68)])])}const y=e(r,[["render",s]]);export{m as __pageData,y as default};
