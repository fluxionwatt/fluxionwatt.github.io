import{_ as e,c as i,o as s,ah as t,en as l,eo as n,ep as r,eq as p,er as h,es as o,et as d,eu as c,ev as g,ew as u,ex as b}from"./chunks/framework.BDBjiFeZ.js";const q=JSON.parse('{"title":"可视化插件发布","description":"","frontmatter":{"sidebar_position":7},"headers":[],"relativePath":"zh_CN/developer-guide/developing-plug-in/visualPublishPlugin.md","filePath":"zh_CN/developer-guide/developing-plug-in/visualPublishPlugin.md"}'),_={name:"zh_CN/developer-guide/developing-plug-in/visualPublishPlugin.md"};function m(k,a,f,v,x,P){return s(),i("div",null,[...a[0]||(a[0]=[t('<h1 id="可视化插件发布" tabindex="-1">可视化插件发布 <a class="header-anchor" href="#可视化插件发布" aria-label="Permalink to “可视化插件发布”">​</a></h1><p>ThingsPanel的可视化编辑器支持用户自定义插件，用户在本地开发完插件后，可发布到官方插件市场供所有人使用。本文介绍了如何发布自定义插件到插件市场。</p><h4 id="什么是可视化插件" tabindex="-1">什么是可视化插件 <a class="header-anchor" href="#什么是可视化插件" aria-label="Permalink to “什么是可视化插件”">​</a></h4><p>可视化插件由多个vue组件组成，最终发布时会自动打包成一个js文件存储到ThingsPanel插件市场中，此时所有登录插件市场的可视化用户都可以一键安装您发布的插件到本地服务器。</p><h2 id="一、插件开发" tabindex="-1">一、插件开发 <a class="header-anchor" href="#一、插件开发" aria-label="Permalink to “一、插件开发”">​</a></h2><p>下载visual-editor项目: <a href="https://github.com/ThingsPanel/visual-editor" target="_blank" rel="noreferrer">https://github.com/ThingsPanel/visual-editor</a></p><p>点这里<a href="./visualPlugin.html">开发自己的第一个插件</a></p><h2 id="二、插件发布" tabindex="-1">二、插件发布 <a class="header-anchor" href="#二、插件发布" aria-label="Permalink to “二、插件发布”">​</a></h2><p>插件开发完成后，就可以进行发布了。</p><h3 id="_1、全局安装cli" tabindex="-1">1、全局安装cli <a class="header-anchor" href="#_1、全局安装cli" aria-label="Permalink to “1、全局安装cli”">​</a></h3><p>打开cmd，输入如下命令安装@thingspanel/cli</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>npm install @thingspanel/cli -g</span></span></code></pre></div><h3 id="_2、本地启动visual-editor项目" tabindex="-1">2、本地启动visual-editor项目 <a class="header-anchor" href="#_2、本地启动visual-editor项目" aria-label="Permalink to “2、本地启动visual-editor项目”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>pnpm run dev</span></span></code></pre></div><h3 id="_3、登录插件市场" tabindex="-1">3、登录插件市场 <a class="header-anchor" href="#_3、登录插件市场" aria-label="Permalink to “3、登录插件市场”">​</a></h3><p>在可视化编辑器的右上角点击插件市场，在弹出的登录界面填入插件市场的账号密码<br><img src="'+l+'" alt=""></p><p>如果没有账号，在这里<a href="http://r.thingspanel.cn/login?register=true" target="_blank" rel="noreferrer">注册</a></p><h3 id="_4、创建插件" tabindex="-1">4、创建插件 <a class="header-anchor" href="#_4、创建插件" aria-label="Permalink to “4、创建插件”">​</a></h3><ul><li><p>登录成功后，点击发布插件 -&gt; 创建插件，填写插件信息，得到Secret <img src="'+n+'" alt="Alt text"></p></li><li><p>然后点击创建插件 <img src="'+r+'" alt="Alt text"></p></li><li><p>在创建插件的界面填入插件的信息。<br><img src="'+p+'" alt="Alt text"></p></li><li><p>点击确定后，插件列表就会新增一条插件信息。 <img src="'+h+'" alt="Alt text"></p></li></ul><h3 id="_5、配置config-json" tabindex="-1">5、配置config.json <a class="header-anchor" href="#_5、配置config-json" aria-label="Permalink to “5、配置config.json”">​</a></h3><p>点击查看Secret，复制Secret。 <img src="'+o+`" alt="Alt text"></p><p>回到代码编辑器中，在自定义插件目录test-plugin下新建config.json文件，配置插件的名称、版本、密钥。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;name&quot;: &quot;myplugin&quot;,</span></span>
<span class="line"><span>    &quot;version&quot;: &quot;0.1.1&quot;,</span></span>
<span class="line"><span>    &quot;secret&quot;: &quot;3e8dba83bee8b8680e943ff86afe8b82&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><ul><li>这里的名称myplugin就是第4步创建插件时填写的插件名称 <img src="`+d+'" alt="Alt text"></li><li>版本由开发者自己定义</li><li>密钥就是刚才获取的secret</li></ul><h3 id="_6、构建并上传插件" tabindex="-1">6、构建并上传插件 <a class="header-anchor" href="#_6、构建并上传插件" aria-label="Permalink to “6、构建并上传插件”">​</a></h3><p>在命令行模式下进入可视化项目根目录，输入如下命令</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>tp-pack -r ./ -i ./src/plugins/test-plugin</span></span></code></pre></div><p><img src="'+c+'" alt="Alt text"></p><p>若提示如下信息，则上传成功。</p><p><img src="'+g+'" alt="Alt text"></p><h3 id="_7、提交审核" tabindex="-1">7、提交审核 <a class="header-anchor" href="#_7、提交审核" aria-label="Permalink to “7、提交审核”">​</a></h3><p>本地启动可视化<code>pnpm run dev</code><br> 再次打开插件市场，点击发布插件，点开插件列表，可以看到我们刚上传的插件。 <img src="'+u+'" alt="Alt text"></p><p>点击<em><strong>提交审核</strong></em>，等待管理员审核。<br> 审核通过后，您的插件就可以供所有人下载使用了。</p><p><img src="'+b+'" alt="Alt text"></p>',34)])])}const A=e(_,[["render",m]]);export{q as __pageData,A as default};
