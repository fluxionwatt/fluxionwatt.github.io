import{_ as i,c as a,o as l,ah as n}from"./chunks/framework.BDBjiFeZ.js";const c=JSON.parse('{"title":"树莓派源码安装","description":"","frontmatter":{"sidebar_position":4},"headers":[],"relativePath":"zh_CN/installation/raspberry_installation.md","filePath":"zh_CN/installation/raspberry_installation.md"}'),h={name:"zh_CN/installation/raspberry_installation.md"};function e(t,s,p,k,r,d){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="树莓派源码安装" tabindex="-1">树莓派源码安装 <a class="header-anchor" href="#树莓派源码安装" aria-label="Permalink to “树莓派源码安装”">​</a></h1><h1 id="thingspanel-树莓派安装指南" tabindex="-1">ThingsPanel 树莓派安装指南 <a class="header-anchor" href="#thingspanel-树莓派安装指南" aria-label="Permalink to “ThingsPanel 树莓派安装指南”">​</a></h1><p>本文档详细介绍了如何在树莓派上安装和配置 ThingsPanel 物联网平台。</p><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-label="Permalink to “目录”">​</a></h2><ul><li><a href="#系统要求">系统要求</a></li><li><a href="#快速安装">快速安装</a></li><li><a href="#详细安装步骤">详细安装步骤</a></li><li><a href="#安装选项">安装选项</a></li><li><a href="#组件说明">组件说明</a></li><li><a href="#故障排除">故障排除</a></li><li><a href="#常见问题">常见问题</a></li><li><a href="#更多资源">更多资源</a></li></ul><h2 id="系统要求" tabindex="-1">系统要求 <a class="header-anchor" href="#系统要求" aria-label="Permalink to “系统要求”">​</a></h2><p>在安装 ThingsPanel 之前，请确保您的树莓派满足以下要求：</p><ul><li>树莓派 3B+ 或更高型号（推荐树莓派 4B 或更高型号）</li><li>至少 2GB RAM（推荐 4GB 或更高）</li><li>至少 16GB SD 卡（推荐 32GB 或更高）</li><li>树莓派 OS（基于 Debian Bullseye 或更高版本）</li><li>网络连接</li></ul><h2 id="快速安装" tabindex="-1">快速安装 <a class="header-anchor" href="#快速安装" aria-label="Permalink to “快速安装”">​</a></h2><p>如果您想快速安装所有组件，可以使用以下命令：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载安装脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_thingspanel_rpi.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/ThingsPanel/thingspanel-rpi-docker/main/install_thingspanel_rpi.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加执行权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_thingspanel_rpi.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完全自动模式安装（所有组件）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><p>安装完成后，通过浏览器访问树莓派的 IP 地址即可打开 ThingsPanel 平台：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>http://树莓派IP地址</span></span></code></pre></div><p>默认账号密码：</p><ul><li>系统管理员: <a href="mailto:super@super.cn" target="_blank" rel="noreferrer">super@super.cn</a> / 123456</li><li>租户管理员: <a href="mailto:tenant@tenant.cn" target="_blank" rel="noreferrer">tenant@tenant.cn</a> / 123456</li></ul><h2 id="详细安装步骤" tabindex="-1">详细安装步骤 <a class="header-anchor" href="#详细安装步骤" aria-label="Permalink to “详细安装步骤”">​</a></h2><p>如果您希望了解更详细的安装过程或自定义安装选项，请按照以下步骤操作：</p><h3 id="_1-准备环境" tabindex="-1">1. 准备环境 <a class="header-anchor" href="#_1-准备环境" aria-label="Permalink to “1. 准备环境”">​</a></h3><p>首先，确保您的树莓派系统是最新的：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><h3 id="_2-下载安装脚本" tabindex="-1">2. 下载安装脚本 <a class="header-anchor" href="#_2-下载安装脚本" aria-label="Permalink to “2. 下载安装脚本”">​</a></h3><p>下载 ThingsPanel 树莓派一键安装脚本：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_thingspanel_rpi.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/ThingsPanel/thingspanel-rpi-docker/main/install_thingspanel_rpi.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install_thingspanel_rpi.sh</span></span></code></pre></div><h3 id="_3-执行安装脚本" tabindex="-1">3. 执行安装脚本 <a class="header-anchor" href="#_3-执行安装脚本" aria-label="Permalink to “3. 执行安装脚本”">​</a></h3><p>根据您的需求，选择以下任一方式运行安装脚本：</p><h4 id="交互式安装-推荐新用户" tabindex="-1">交互式安装（推荐新用户） <a class="header-anchor" href="#交互式安装-推荐新用户" aria-label="Permalink to “交互式安装（推荐新用户）”">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span></span></code></pre></div><p>此模式会在每一步都向您询问确认，适合希望了解整个安装过程的用户。</p><h4 id="自动确认安装" tabindex="-1">自动确认安装 <a class="header-anchor" href="#自动确认安装" aria-label="Permalink to “自动确认安装”">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p>此模式会自动确认所有提示，但仍会显示安装进度。</p><h4 id="完全自动安装" tabindex="-1">完全自动安装 <a class="header-anchor" href="#完全自动安装" aria-label="Permalink to “完全自动安装”">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><p>此模式下，脚本会自动安装所有组件，无需任何交互。</p><h4 id="自定义组件安装" tabindex="-1">自定义组件安装 <a class="header-anchor" href="#自定义组件安装" aria-label="Permalink to “自定义组件安装”">​</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 只安装指定组件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis,timescaledb,backend</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装除了指定组件外的所有组件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frontend</span></span></code></pre></div><h3 id="_4-安装过程" tabindex="-1">4. 安装过程 <a class="header-anchor" href="#_4-安装过程" aria-label="Permalink to “4. 安装过程”">​</a></h3><p>安装脚本会自动执行以下操作：</p><ol><li>设置安装环境和目录</li><li>更新系统</li><li>安装必要工具和依赖</li><li>安装 Docker</li><li>检测 ARM 架构并设置环境</li><li>安装 Go 环境（如果需要）</li><li>安装 Redis 数据库</li><li>安装 TimescaleDB 数据库</li><li>安装 GMQTT 消息代理</li><li>安装 ThingsPanel 后端服务</li><li>安装 ThingsPanel 前端（包括 Nginx 配置）</li></ol><p>整个安装过程根据网络状况和树莓派性能可能需要 15-30 分钟。</p><h3 id="_5-验证安装" tabindex="-1">5. 验证安装 <a class="header-anchor" href="#_5-验证安装" aria-label="Permalink to “5. 验证安装”">​</a></h3><p>安装完成后，脚本会显示访问信息：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ThingsPanel安装完成!</span></span>
<span class="line"><span>访问地址: http://您的树莓派IP地址</span></span>
<span class="line"><span>默认账号密码:</span></span>
<span class="line"><span>- 系统管理员: super@super.cn / 123456</span></span>
<span class="line"><span>- 租户管理员: tenant@tenant.cn / 123456</span></span></code></pre></div><p>使用浏览器访问该地址，并使用默认账号登录系统。</p><h2 id="安装选项" tabindex="-1">安装选项 <a class="header-anchor" href="#安装选项" aria-label="Permalink to “安装选项”">​</a></h2><p>安装脚本支持以下命令行选项：</p><table tabindex="0"><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-y, --yes</code></td><td>自动模式，所有提示默认选择 yes</td></tr><tr><td><code>-a, --auto</code></td><td>完全自动模式，不显示任何提示，自动安装所有组件</td></tr><tr><td><code>-c, --components</code></td><td>指定要安装的组件，用逗号分隔 (redis,timescaledb,gmqtt,backend,frontend)</td></tr><tr><td><code>-s, --skip</code></td><td>指定要跳过的组件，用逗号分隔 (redis,timescaledb,gmqtt,backend,frontend)</td></tr><tr><td><code>-v, --verbose</code></td><td>详细模式，即使在自动模式下也显示所有输出</td></tr><tr><td><code>-p, --prebuilt</code></td><td>使用预编译的二进制文件（默认选项）</td></tr><tr><td><code>-b, --build</code></td><td>从源码编译（不推荐在低性能设备上使用）</td></tr><tr><td><code>-h, --help</code></td><td>显示帮助信息</td></tr></tbody></table><h2 id="组件说明" tabindex="-1">组件说明 <a class="header-anchor" href="#组件说明" aria-label="Permalink to “组件说明”">​</a></h2><p>ThingsPanel 树莓派版包含以下核心组件：</p><h3 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to “Redis”">​</a></h3><p>用于缓存和消息队列，安装在 Docker 容器中。</p><ul><li>端口: 6379</li><li>密码: redis</li><li>数据目录: /home/pi/thingspanel/redis/data</li></ul><h3 id="timescaledb" tabindex="-1">TimescaleDB <a class="header-anchor" href="#timescaledb" aria-label="Permalink to “TimescaleDB”">​</a></h3><p>用于存储时序数据和系统配置，基于 PostgreSQL 的时序数据库，安装在 Docker 容器中。</p><ul><li>端口: 5432</li><li>数据库名: ThingsPanel</li><li>用户名: postgres</li><li>密码: postgresThingsPanel</li><li>数据目录: /home/pi/thingspanel/timescaledb/data</li></ul><h3 id="gmqtt" tabindex="-1">GMQTT <a class="header-anchor" href="#gmqtt" aria-label="Permalink to “GMQTT”">​</a></h3><p>MQTT 消息代理，用于设备通信，通过 PM2 管理的服务。</p><ul><li>端口: 1883</li><li>超级用户名: root</li><li>超级用户密码: root</li><li>设备接入服务密码: plugin</li><li>安装目录: /home/pi/thingspanel/thingspanel-gmqtt</li></ul><h3 id="后端服务" tabindex="-1">后端服务 <a class="header-anchor" href="#后端服务" aria-label="Permalink to “后端服务”">​</a></h3><p>ThingsPanel 核心逻辑和 API 服务，通过 PM2 管理的服务。</p><ul><li>端口: 9999</li><li>安装目录: /home/pi/thingspanel/thingspanel-backend-community</li><li>日志目录: /home/pi/thingspanel/thingspanel-backend-community/files/logs</li></ul><h3 id="前端服务" tabindex="-1">前端服务 <a class="header-anchor" href="#前端服务" aria-label="Permalink to “前端服务”">​</a></h3><p>ThingsPanel Web 界面，通过 Nginx 提供服务。</p><ul><li>端口: 80</li><li>网站目录: /var/www/html/thingspanel</li><li>Nginx 配置: /etc/nginx/sites-available/thingspanel</li></ul><h2 id="故障排除" tabindex="-1">故障排除 <a class="header-anchor" href="#故障排除" aria-label="Permalink to “故障排除”">​</a></h2><p>如果在安装或使用过程中遇到问题，请尝试以下解决方案：</p><h3 id="_1-服务无法启动" tabindex="-1">1. 服务无法启动 <a class="header-anchor" href="#_1-服务无法启动" aria-label="Permalink to “1. 服务无法启动”">​</a></h3><p>检查各个服务的状态：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看所有 Docker 容器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 PM2 管理的进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 Nginx 状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span></code></pre></div><h3 id="_2-网页显示-502-错误" tabindex="-1">2. 网页显示 502 错误 <a class="header-anchor" href="#_2-网页显示-502-错误" aria-label="Permalink to “2. 网页显示 502 错误”">​</a></h3><p>这通常意味着后端服务未正常运行，请尝试：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启后端服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> backend</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看后端日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> backend</span></span></code></pre></div><h3 id="_3-设备无法连接-mqtt-服务" tabindex="-1">3. 设备无法连接 MQTT 服务 <a class="header-anchor" href="#_3-设备无法连接-mqtt-服务" aria-label="Permalink to “3. 设备无法连接 MQTT 服务”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 GMQTT 服务状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gmqtt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启 GMQTT 服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gmqtt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 GMQTT 日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gmqtt</span></span></code></pre></div><h3 id="_4-数据库连接问题" tabindex="-1">4. 数据库连接问题 <a class="header-anchor" href="#_4-数据库连接问题" aria-label="Permalink to “4. 数据库连接问题”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查数据库容器状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timescaledb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看数据库日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timescaledb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启数据库容器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timescaledb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_5-重启所有服务" tabindex="-1">5. 重启所有服务 <a class="header-anchor" href="#_5-重启所有服务" aria-label="Permalink to “5. 重启所有服务”">​</a></h3><p>如果系统功能异常，可以尝试重启所有服务：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启所有 PM2 管理的服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启 Nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启 Docker 容器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to “常见问题”">​</a></h2><h3 id="q-安装过程中出现-端口已被占用-错误" tabindex="-1">Q: 安装过程中出现&quot;端口已被占用&quot;错误 <a class="header-anchor" href="#q-安装过程中出现-端口已被占用-错误" aria-label="Permalink to “Q: 安装过程中出现&quot;端口已被占用&quot;错误”">​</a></h3><p>A: 这意味着系统中已有服务占用了需要使用的端口。您可以使用 <code>sudo lsof -i:端口号</code> 命令查找占用端口的进程，然后终止它或使用 <code>-s</code> 参数跳过相应组件的安装。</p><h3 id="q-安装后无法访问-web-界面" tabindex="-1">Q: 安装后无法访问 Web 界面 <a class="header-anchor" href="#q-安装后无法访问-web-界面" aria-label="Permalink to “Q: 安装后无法访问 Web 界面”">​</a></h3><p>A: 请检查以下几点：</p><ol><li>确认 Nginx 服务已启动：<code>sudo systemctl status nginx</code></li><li>确认后端服务已启动：<code>pm2 status backend</code></li><li>检查防火墙配置：<code>sudo ufw status</code>（如果已启用，确保端口 80 已开放）</li><li>使用正确的 IP 地址：<code>hostname -I</code></li></ol><h3 id="q-如何备份数据" tabindex="-1">Q: 如何备份数据 <a class="header-anchor" href="#q-如何备份数据" aria-label="Permalink to “Q: 如何备份数据”">​</a></h3><p>A: ThingsPanel 的主要数据存储在 TimescaleDB 中，您可以使用 PostgreSQL 的备份工具进行备份：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份数据库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timescaledb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pg_dump</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ThingsPanel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thingspanel_backup.sql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 还原数据库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> thingspanel_backup.sql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timescaledb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ThingsPanel</span></span></code></pre></div><h3 id="q-如何更新-thingspanel" tabindex="-1">Q: 如何更新 ThingsPanel <a class="header-anchor" href="#q-如何更新-thingspanel" aria-label="Permalink to “Q: 如何更新 ThingsPanel”">​</a></h3><p>A: 目前推荐的更新方法是重新运行安装脚本：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install_thingspanel_rpi.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p>脚本会检测已安装的组件并提供更新选项。</p><h2 id="更多资源" tabindex="-1">更多资源 <a class="header-anchor" href="#更多资源" aria-label="Permalink to “更多资源”">​</a></h2><ul><li><a href="https://thingspanel.io" target="_blank" rel="noreferrer">ThingsPanel 官方文档</a></li><li><a href="https://github.com/ThingsPanel" target="_blank" rel="noreferrer">ThingsPanel GitHub 仓库</a></li></ul><p>如果您在使用过程中遇到任何问题，或有任何建议，欢迎在 GitHub 上提交 issue 或加入我们的社区讨论。</p>`,95)])])}const F=i(h,[["render",e]]);export{c as __pageData,F as default};
