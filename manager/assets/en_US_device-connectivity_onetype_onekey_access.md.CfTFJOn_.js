import{_ as t,c as i,o as a,ah as s,bv as n,bw as r,bx as l,by as d}from"./chunks/framework.BDBjiFeZ.js";const m=JSON.parse('{"title":"One Type One Secret","description":"","frontmatter":{"sidebar_position":12},"headers":[],"relativePath":"en_US/device-connectivity/onetype_onekey_access.md","filePath":"en_US/device-connectivity/onetype_onekey_access.md"}'),h={name:"en_US/device-connectivity/onetype_onekey_access.md"};function o(c,e,p,k,u,g){return a(),i("div",null,[...e[0]||(e[0]=[s('<h1 id="one-type-one-secret" tabindex="-1">One Type One Secret <a class="header-anchor" href="#one-type-one-secret" aria-label="Permalink to ‚ÄúOne Type One Secret‚Äù">‚Äã</a></h1><h2 id="core-principle" tabindex="-1">Core Principle <a class="header-anchor" href="#core-principle" aria-label="Permalink to ‚ÄúCore Principle‚Äù">‚Äã</a></h2><p><img src="'+n+'" alt="Principle"></p><p>The core principle of &quot;One Type One Secret&quot; authentication is:</p><ul><li><strong>&quot;One Type&quot;</strong>: Represents a class of devices sharing the same Type Secret (Template Secret).</li><li><strong>&quot;One Secret&quot;</strong>: Represents the exclusive unique connection credential (Voucher) eventually obtained by each device.</li></ul><p>This mechanism balances production convenience and security, avoiding the complexity of pre-setting unique secrets for every single device.</p><h3 id="three-key-stages" tabindex="-1">Three Key Stages <a class="header-anchor" href="#three-key-stages" aria-label="Permalink to ‚ÄúThree Key Stages‚Äù">‚Äã</a></h3><h4 id="_1-type-secret-preset-stage" tabindex="-1">1. Type Secret Preset Stage <a class="header-anchor" href="#_1-type-secret-preset-stage" aria-label="Permalink to ‚Äú1. Type Secret Preset Stage‚Äù">‚Äã</a></h4><ul><li><strong>Platform</strong>: Create Device Template, generate Template Secret.</li><li><strong>Device</strong>: Preset Template Secret during production (shared by same type devices).</li></ul><h4 id="_2-device-authentication-stage" tabindex="-1">2. Device Authentication Stage <a class="header-anchor" href="#_2-device-authentication-stage" aria-label="Permalink to ‚Äú2. Device Authentication Stage‚Äù">‚Äã</a></h4><ul><li><strong>Device</strong>: Determine own unique ID (e.g., Chip ID, MAC, IMEI).</li><li><strong>Device ‚Üí Platform</strong>: Send auth request containing Template Secret and Unique ID.</li><li><strong>Platform</strong>: Validate Template Secret and Unique ID.</li></ul><h4 id="_3-credential-issuance-stage" tabindex="-1">3. Credential Issuance Stage <a class="header-anchor" href="#_3-credential-issuance-stage" aria-label="Permalink to ‚Äú3. Credential Issuance Stage‚Äù">‚Äã</a></h4><ul><li><strong>Platform</strong>: Generate unique connection credential for valid device.</li><li><strong>Platform ‚Üí Device</strong>: Send credential.</li><li><strong>Device</strong>: Save credential for subsequent secure connections.</li></ul><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><p>This mechanism effectively solves security and efficiency issues in large-scale IoT deployment, suitable for various platforms and scenarios.</p></div><h2 id="thingspanel-design" tabindex="-1">ThingsPanel Design <a class="header-anchor" href="#thingspanel-design" aria-label="Permalink to ‚ÄúThingsPanel Design‚Äù">‚Äã</a></h2><p><img src="'+r+'" alt="Design"></p><h3 id="flow-with-template-secret-only" tabindex="-1">Flow with Template Secret Only <a class="header-anchor" href="#flow-with-template-secret-only" aria-label="Permalink to ‚ÄúFlow with Template Secret Only‚Äù">‚Äã</a></h3><p><img src="'+l+'" alt="Flow 1"></p><h3 id="flow-with-template-secret-productkey" tabindex="-1">Flow with Template Secret + ProductKey <a class="header-anchor" href="#flow-with-template-secret-productkey" aria-label="Permalink to ‚ÄúFlow with Template Secret + ProductKey‚Äù">‚Äã</a></h3><p><img src="'+d+`" alt="Flow 2"></p><h2 id="api-specification" tabindex="-1">API Specification <a class="header-anchor" href="#api-specification" aria-label="Permalink to ‚ÄúAPI Specification‚Äù">‚Äã</a></h2><h3 id="dynamic-authentication-interface" tabindex="-1">Dynamic Authentication Interface <a class="header-anchor" href="#dynamic-authentication-interface" aria-label="Permalink to ‚ÄúDynamic Authentication Interface‚Äù">‚Äã</a></h3><p><strong>URL:</strong> <code>POST /api/v1/device/auth</code></p><p><strong>Description:</strong> Supports One Type One Secret dynamic authentication.</p><h4 id="request-parameters" tabindex="-1">Request Parameters <a class="header-anchor" href="#request-parameters" aria-label="Permalink to ‚ÄúRequest Parameters‚Äù">‚Äã</a></h4><table tabindex="0"><thead><tr><th>Param</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>template_secret</code></td><td>string</td><td>‚úÖ</td><td>Template Secret</td></tr><tr><td><code>device_number</code></td><td>string</td><td>‚úÖ</td><td>Device Unique ID (MAC, IMEI, etc.)</td></tr><tr><td><code>device_name</code></td><td>string</td><td>‚ùå</td><td>Device Name</td></tr><tr><td><code>product_key</code></td><td>string</td><td>‚ùå</td><td>Product Key (for association)</td></tr><tr><td><code>parent_device_number</code></td><td>string</td><td>‚ùå</td><td>Parent Device ID (Required for sub-device)</td></tr><tr><td><code>sub_device_addr</code></td><td>string</td><td>‚ùå</td><td>Sub-device Address (Required for sub-device)</td></tr></tbody></table><h4 id="request-example" tabindex="-1">Request Example <a class="header-anchor" href="#request-example" aria-label="Permalink to ‚ÄúRequest Example‚Äù">‚Äã</a></h4><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;template_secret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_template_secret&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;device_number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_device_unique_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;device_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DeviceName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;product_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_product_key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="response-parameters" tabindex="-1">Response Parameters <a class="header-anchor" href="#response-parameters" aria-label="Permalink to ‚ÄúResponse Parameters‚Äù">‚Äã</a></h4><table tabindex="0"><thead><tr><th>Param</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>code</code></td><td>integer</td><td>Status code, 200 = Success</td></tr><tr><td><code>message</code></td><td>string</td><td>Message</td></tr><tr><td><code>data</code></td><td>object</td><td>Data</td></tr><tr><td><code>‚îî‚îÄ device_id</code></td><td>string</td><td>Device ID</td></tr><tr><td><code>‚îî‚îÄ voucher</code></td><td>string</td><td>Voucher</td></tr></tbody></table><h4 id="response-example" tabindex="-1">Response Example <a class="header-anchor" href="#response-example" aria-label="Permalink to ‚ÄúResponse Example‚Äù">‚Äã</a></h4><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;device_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4e7e16dc-b1e7-5eef-32a6-48a7d767c85f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;voucher&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">username</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">6c2f1bdc-6fc2-b535-f0ba-f77fe9dc6db1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="user-guide" tabindex="-1">User Guide <a class="header-anchor" href="#user-guide" aria-label="Permalink to ‚ÄúUser Guide‚Äù">‚Äã</a></h2><h3 id="üöÄ-preparation" tabindex="-1">üöÄ Preparation <a class="header-anchor" href="#üöÄ-preparation" aria-label="Permalink to ‚ÄúüöÄ Preparation‚Äù">‚Äã</a></h3><ul><li>Create Device Template and get Template Secret.</li><li>Determine Device Unique ID.</li><li>Prepare Product Key if needed.</li></ul><h3 id="üìã-process" tabindex="-1">üìã Process <a class="header-anchor" href="#üìã-process" aria-label="Permalink to ‚Äúüìã Process‚Äù">‚Äã</a></h3><ol><li>Device sends auth request to <code>/api/v1/device/auth</code> on startup.</li><li>Platform validates.</li><li>Platform returns Device ID and Voucher.</li><li>Device saves Voucher.</li></ol><h3 id="‚ö†Ô∏è-notes" tabindex="-1">‚ö†Ô∏è Notes <a class="header-anchor" href="#‚ö†Ô∏è-notes" aria-label="Permalink to ‚Äú‚ö†Ô∏è Notes‚Äù">‚Äã</a></h3><ul><li>Template Secret is shared, keep it safe.</li><li>Device Unique ID must be globally unique.</li><li>Securely store the Voucher.</li><li>Cache Voucher locally after first auth.</li></ul>`,39)])])}const E=t(h,[["render",o]]);export{m as __pageData,E as default};
