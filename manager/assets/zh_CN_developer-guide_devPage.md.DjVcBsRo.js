import{_ as n,c as a,o as p,ah as l,dW as e,dX as i,dY as t,dZ as c,d_ as o}from"./chunks/framework.BDBjiFeZ.js";const _=JSON.parse('{"title":"菜单和页面","description":"","frontmatter":{"sidebar_position":2},"headers":[],"relativePath":"zh_CN/developer-guide/devPage.md","filePath":"zh_CN/developer-guide/devPage.md"}'),r={name:"zh_CN/developer-guide/devPage.md"};function d(h,s,g,u,m,b){return p(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="菜单和页面" tabindex="-1">菜单和页面 <a class="header-anchor" href="#菜单和页面" aria-label="Permalink to “菜单和页面”">​</a></h1><h2 id="一、概述" tabindex="-1">一、概述 <a class="header-anchor" href="#一、概述" aria-label="Permalink to “一、概述”">​</a></h2><p>如果系统提供的菜单或页面无法满足您的需求，可以开发自己想要的页面然后在权限管理页面新建菜单，链接到您的自定义页面。</p><h3 id="项目目录结构" tabindex="-1">项目目录结构 <a class="header-anchor" href="#项目目录结构" aria-label="Permalink to “项目目录结构”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>thinspanel</span></span>
<span class="line"><span>├── .vscode                        //vscode插件和设置</span></span>
<span class="line"><span>│   ├── extensions.json            //vscode推荐的插件</span></span>
<span class="line"><span>│   ├── launch.json                //debug配置文件(debug Vue 和 TS)</span></span>
<span class="line"><span>│   └── settings.json              //vscode配置(在该项目中生效，可以复制到用户配置文件中)</span></span>
<span class="line"><span>├── build                          //vite构建相关配置和插件</span></span>
<span class="line"><span>│   ├── config                     //构建打包配置</span></span>
<span class="line"><span>│   │   └── proxy.ts               //网络请求代理</span></span>
<span class="line"><span>│   └── plugins                    //构建插件</span></span>
<span class="line"><span>│       ├── index.ts               //插件汇总</span></span>
<span class="line"><span>│       ├── router.ts              //elegant-router插件</span></span>
<span class="line"><span>│       ├── unocss.ts              //unocss插件</span></span>
<span class="line"><span>│       └── unplugin.ts            //自动导入UI组件、自动解析iconify图标、自动解析本地svg作为图标</span></span>
<span class="line"><span>├── packages                       //子项目</span></span>
<span class="line"><span>│   ├── axios                      //网络请求封装</span></span>
<span class="line"><span>│   ├── color-palette              //颜色调色板</span></span>
<span class="line"><span>│   ├── hooks                      //组合式函数hooks</span></span>
<span class="line"><span>│   ├── materials                  //组件物料</span></span>
<span class="line"><span>│   ├── ofetch                     //网络请求封装</span></span>
<span class="line"><span>│   ├── scripts                    //脚本</span></span>
<span class="line"><span>│   ├── uno-preset                 //uno-preset配置</span></span>
<span class="line"><span>│   └── utils                      //工具函数</span></span>
<span class="line"><span>├── public                         //公共目录(文件夹里面的资源打包后会在根目录下)</span></span>
<span class="line"><span>│   └── favicon.svg                //网站标签图标</span></span>
<span class="line"><span>├── src</span></span>
<span class="line"><span>│   ├── assets                     //静态资源</span></span>
<span class="line"><span>│   │   ├── imgs                   //图片</span></span>
<span class="line"><span>│   │   └── svg-icon               //本地svg图标</span></span>
<span class="line"><span>│   ├── components                 //全局组件</span></span>
<span class="line"><span>│   │   ├── advanced               //高级组件</span></span>
<span class="line"><span>│   │   ├── common                 //公共组件</span></span>
<span class="line"><span>│   │   └── custom                 //自定义组件</span></span>
<span class="line"><span>│   ├── constants                  //常量</span></span>
<span class="line"><span>│   │   ├── app.ts                 //app常量</span></span>
<span class="line"><span>│   │   ├── business.ts            //业务常量</span></span>
<span class="line"><span>│   │   ├── common.ts              //通用常量</span></span>
<span class="line"><span>│   │   └── reg.ts                 //正则常量</span></span>
<span class="line"><span>│   ├── enums                      //枚举</span></span>
<span class="line"><span>│   ├── hooks                      //组合式的函数hooks</span></span>
<span class="line"><span>│   │   ├── business               //业务hooks</span></span>
<span class="line"><span>│   │   │   ├── auth               //用户权限</span></span>
<span class="line"><span>│   │   │   └── captcha            //验证码</span></span>
<span class="line"><span>│   │   └── common                 //通用hooks</span></span>
<span class="line"><span>│   │       ├── echarts            //echarts</span></span>
<span class="line"><span>│   │       ├── form               //表单</span></span>
<span class="line"><span>│   │       ├── icon               //图标</span></span>
<span class="line"><span>│   │       ├── router             //路由</span></span>
<span class="line"><span>│   │       └── table              //表格</span></span>
<span class="line"><span>│   ├── layouts                    //布局组件</span></span>
<span class="line"><span>│   │   ├── base-layout            //基本布局(包含全局头部、多页签、侧边栏、底部等公共部分)</span></span>
<span class="line"><span>│   │   ├── blank-layout           //空白布局组件(单个页面)</span></span>
<span class="line"><span>│   │   ├── context                //布局组件的上下文状态</span></span>
<span class="line"><span>│   │   ├── hooks                  //布局组件的hooks</span></span>
<span class="line"><span>│   │   └── modules                //布局组件模块</span></span>
<span class="line"><span>│   │       ├── global-breadcrumb  //全局面包屑</span></span>
<span class="line"><span>│   │       ├── global-content     //全局主体内容</span></span>
<span class="line"><span>│   │       ├── global-footer      //全局底部</span></span>
<span class="line"><span>│   │       ├── global-header      //全局头部</span></span>
<span class="line"><span>│   │       ├── global-logo        //全局Logo</span></span>
<span class="line"><span>│   │       ├── global-menu        //全局菜单</span></span>
<span class="line"><span>│   │       ├── global-search      //全局搜索</span></span>
<span class="line"><span>│   │       ├── global-sider       //全局侧边栏</span></span>
<span class="line"><span>│   │       ├── global-tab         //全局标签页</span></span>
<span class="line"><span>│   │       └── theme-drawer       //主题抽屉</span></span>
<span class="line"><span>│   ├── locales                //国际化配置</span></span>
<span class="line"><span>│   │   ├── langs              //语言文件</span></span>
<span class="line"><span>│   │   ├── dayjs.ts           //dayjs的国际化配置</span></span>
<span class="line"><span>│   │   ├── locale.ts          //语言文件汇总</span></span>
<span class="line"><span>│   │   └── naive.ts           //NaiveUI的国际化配置</span></span>
<span class="line"><span>│   ├── plugins                //插件</span></span>
<span class="line"><span>│   │   ├── assets.ts          //各种依赖的静态资源导入(css、scss等)</span></span>
<span class="line"><span>│   │   ├── dayjs.ts           //dayjs插件</span></span>
<span class="line"><span>│   │   ├── iconify.ts         //iconify插件</span></span>
<span class="line"><span>│   │   ├── loading.ts         //全局初始化时的加载插件</span></span>
<span class="line"><span>│   │   └── nprogress.ts       //顶部加载条nprogress插件</span></span>
<span class="line"><span>│   ├── router                 //vue路由</span></span>
<span class="line"><span>│   │   ├── elegant            //elegant-router插件生成的路由声明、导入和转换等文件</span></span>
<span class="line"><span>│   │   ├── guard              //路由守卫</span></span>
<span class="line"><span>│   │   ├── routes             //路由声明入口</span></span>
<span class="line"><span>│   │   │   ├── builtin        //系统内置路由 根路由和未找到路由</span></span>
<span class="line"><span>│   │   │   └── index          //前端静态路由创建的入口</span></span>
<span class="line"><span>│   │   └── index.ts           //路由插件入口</span></span>
<span class="line"><span>│   ├── service                //网络请求</span></span>
<span class="line"><span>│   │   ├── api                //接口api</span></span>
<span class="line"><span>│   │   └── request            //封装的请求函数</span></span>
<span class="line"><span>│   ├── store                  //pinia状态管理</span></span>
<span class="line"><span>│   │   ├── modules            //状态管理划分的模块</span></span>
<span class="line"><span>│   │   │   ├── app            //app状态(页面重载、菜单折叠、项目配置的抽屉)</span></span>
<span class="line"><span>│   │   │   ├── auth           //auth状态(用户信息、用户权益)</span></span>
<span class="line"><span>│   │   │   ├── route          //route状态(动态路由、菜单、路由缓存)</span></span>
<span class="line"><span>│   │   │   ├── tab            //tab状态(多页签、缓存页面的滚动位置)</span></span>
<span class="line"><span>│   │   │   └── theme          //theme状态(项目主题配置)</span></span>
<span class="line"><span>│   │   └── plugins            //状态管理插件</span></span>
<span class="line"><span>│   ├── styles                 //全局样式</span></span>
<span class="line"><span>│   │   ├── css                //css</span></span>
<span class="line"><span>│   │   └── scss               //scss</span></span>
<span class="line"><span>│   ├── theme                  //主题配置</span></span>
<span class="line"><span>│   │   ├── settings.ts        //主题默认配置及覆盖配置</span></span>
<span class="line"><span>│   │   └── vars.ts            //主题token对应的css变量</span></span>
<span class="line"><span>│   ├── typings                //TS类型声明文件(*.d.ts)</span></span>
<span class="line"><span>│   │   ├── api.d.ts           //请求接口返回的数据的类型声明</span></span>
<span class="line"><span>│   │   ├── app.d.ts           //应用相关的类型声明</span></span>
<span class="line"><span>│   │   ├── common.d.ts        //通用类型声明</span></span>
<span class="line"><span>│   │   ├── components.d.ts    //自动导入的组件的类型声明</span></span>
<span class="line"><span>│   │   ├── elegant-router.d.ts//插件elegant-router生成的路由声明</span></span>
<span class="line"><span>│   │   ├── env.d.ts           //vue路由描述和请求环境相关的类型声明</span></span>
<span class="line"><span>│   │   ├── global.d.ts        //全局通用类型</span></span>
<span class="line"><span>│   │   ├── naive-ui.d.ts      //NaiveUI类型</span></span>
<span class="line"><span>│   │   ├── router.d.ts        //Vue的路由描述的类型声明</span></span>
<span class="line"><span>│   │   ├── storage.d.ts       //本地缓存的数据类型</span></span>
<span class="line"><span>│   │   └── union-key.d.ts     //联合类型</span></span>
<span class="line"><span>│   ├── utils                  //全局工具函数(纯函数，不含状态)</span></span>
<span class="line"><span>│   │   ├── common             //通用工具函数</span></span>
<span class="line"><span>│   │   ├── icon               //图标相关工具函数</span></span>
<span class="line"><span>│   │   ├── service            //请求服务配置相关的工具函数</span></span>
<span class="line"><span>│   │   └── storage            //存储相关工具函数</span></span>
<span class="line"><span>│   ├── views                  //页面</span></span>
<span class="line"><span>│   │   ├── _builtin           //系统内置页面：登录、异常页等</span></span>
<span class="line"><span>│   │   ├── about              //关于</span></span>
<span class="line"><span>│   │   ├── function           //功能</span></span>
<span class="line"><span>│   │   ├── home               //首页</span></span>
<span class="line"><span>│   │   ├── manage             //系统管理</span></span>
<span class="line"><span>│   │   ├── multi-menu         //多级菜单</span></span>
<span class="line"><span>│   │   └── user-center        //用户中心</span></span>
<span class="line"><span>│   ├── App.vue                //Vue文件入口</span></span>
<span class="line"><span>│   └── main.ts                //项目入口TS文件</span></span>
<span class="line"><span>├── .editorconfig              //统一编辑器配置</span></span>
<span class="line"><span>├── .env                       //环境文件</span></span>
<span class="line"><span>├── .env.prod                  //生产环境的环境文件</span></span>
<span class="line"><span>├── .env.test                  //测试环境的环境文件</span></span>
<span class="line"><span>├── .gitattributes             //git属性配置</span></span>
<span class="line"><span>├── .gitignore                 //忽略git提交的配置文件</span></span>
<span class="line"><span>├── .npmrc                     //npm配置</span></span>
<span class="line"><span>├── CHANGELOG.md               //项目更新日志</span></span>
<span class="line"><span>├── eslint.config.js           //eslint flat配置文件</span></span>
<span class="line"><span>├── index.html                 //html文件</span></span>
<span class="line"><span>├── package.json               //npm依赖描述文件</span></span>
<span class="line"><span>├── pnpm-lock.yaml             //npm包管理器pnpm依赖锁定文件</span></span>
<span class="line"><span>├── README.md                  //项目介绍文档</span></span>
<span class="line"><span>├── README.zh-CN.md            //项目介绍文档(中文)</span></span>
<span class="line"><span>├── tsconfig.json              //TS配置</span></span>
<span class="line"><span>├── uno.config.ts              //原子css框架unocss配置</span></span>
<span class="line"><span>└── vite.config.ts             //vite配置</span></span></code></pre></div><h2 id="二、开发步骤" tabindex="-1">二、开发步骤 <a class="header-anchor" href="#二、开发步骤" aria-label="Permalink to “二、开发步骤”">​</a></h2><h3 id="_1-启动项目配置环境变量" tabindex="-1">1. 启动项目配置环境变量 <a class="header-anchor" href="#_1-启动项目配置环境变量" aria-label="Permalink to “1. 启动项目配置环境变量”">​</a></h3><p>安装依赖</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>pnpm i</span></span></code></pre></div><p>启动项目</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>pnpm dev</span></span></code></pre></div><p>在env.config.ts 修改，为你自己后端地址，后端前往<a href="https://github.com/ThingsPanel/thingspanel-backend-community" target="_blank" rel="noreferrer">https://github.com/ThingsPanel/thingspanel-backend-community</a> 拉取项目，或者使用dock部署</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>  const devURL = &#39;&#39;;</span></span></code></pre></div><p>配置环境变量 .env .env.development .env.production 分别为全局变量，开发环境变量，生产环境变量，其中ITE_AUTH_ROUTE_MODE=dynamic，时才会从后端获取菜单</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>VITE_BASE_URL=/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>VITE_APP_TITLE=ThingsPanel物联网云平台</span></span>
<span class="line"><span></span></span>
<span class="line"><span>VITE_APP_DESC=ThingsPanel</span></span>
<span class="line"><span></span></span>
<span class="line"><span># the prefix of the icon name</span></span>
<span class="line"><span>VITE_ICON_PREFIX=icon</span></span>
<span class="line"><span></span></span>
<span class="line"><span># the prefix of the local svg icon component, must include VITE_ICON_PREFIX</span></span>
<span class="line"><span># format {VITE_ICON_PREFIX}-{local icon name}</span></span>
<span class="line"><span>VITE_ICON_LOCAL_PREFIX=icon-local</span></span>
<span class="line"><span></span></span>
<span class="line"><span># auth route mode: static ｜ dynamic</span></span>
<span class="line"><span>VITE_AUTH_ROUTE_MODE=static</span></span>
<span class="line"><span># VITE_AUTH_ROUTE_MODE=dynamic</span></span>
<span class="line"><span># static auth route home</span></span>
<span class="line"><span>VITE_ROUTE_HOME=home</span></span>
<span class="line"><span></span></span>
<span class="line"><span># default menu icon</span></span>
<span class="line"><span>VITE_MENU_ICON=mdi:menu</span></span>
<span class="line"><span></span></span>
<span class="line"><span># encrypt password</span></span>
<span class="line"><span>VITE_ENCRYPT_PASSWORD=0</span></span></code></pre></div><h3 id="_2-编写vue页面" tabindex="-1">2. 编写Vue页面 <a class="header-anchor" href="#_2-编写vue页面" aria-label="Permalink to “2. 编写Vue页面”">​</a></h3><p>用开发工具打开前端项目，在<code>src/view</code>目录下新建一个文件夹，名称由开发者自己定义，本例中命名为<code>test123</code><img src="`+e+`" alt="img.png"></p><p>在test123目录内新建一个Vue页面，名称为index.vue，,pnpm dev 启动项目后，这里会在上述目录结构src\\router\\elegant\\routes.ts 中自动添加页面路由，关键信息：i18nKey，path，component，tittle。配置菜单时需要<br> index.vue代码如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;template&gt;</span></span>
<span class="line"><span>  &lt;div&gt;</span></span>
<span class="line"><span>    &lt;h1 style=&quot;color:white&quot;&gt;这是一个测试页面&lt;/h1&gt;</span></span>
<span class="line"><span>    &lt;h2 style=&quot;color:green&quot;&gt;这是一个测试页面&lt;/h2&gt;</span></span>
<span class="line"><span>  &lt;/div&gt;</span></span>
<span class="line"><span>&lt;/template&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;script&gt;</span></span>
<span class="line"><span>export default {</span></span>
<span class="line"><span>  name: &quot;index&quot;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>&lt;/script&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;style scoped&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;/style&gt;</span></span></code></pre></div><p>路由如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>{</span></span>
<span class="line"><span>    name: &#39;test123&#39;,</span></span>
<span class="line"><span>    path: &#39;/test123&#39;,</span></span>
<span class="line"><span>    component: &#39;layout.base$view.test123&#39;,</span></span>
<span class="line"><span>    meta: {</span></span>
<span class="line"><span>      title: &#39;test123&#39;,</span></span>
<span class="line"><span>      i18nKey: &#39;route.test123&#39;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  },</span></span></code></pre></div><p>页面编写完成后就可以添加菜单了。</p><h3 id="_3-添加菜单" tabindex="-1">3. 添加菜单 <a class="header-anchor" href="#_3-添加菜单" aria-label="Permalink to “3. 添加菜单”">​</a></h3><p>启动项目，登录管理员账号，并确认在环境变量中设置，VITE_AUTH_ROUTE_MODE=dynamic， 登录管理员账号， 在左侧菜单点击<strong>系统管理</strong> -&gt; <strong>菜单管理</strong> 打开权限管理页面。<br><img src="`+i+'" alt="img.png"></p><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>注意：只有超级管理员才有权限查看或编辑权限管理页面，修改之前一定要先备份数据库。 必须在国际化文件中将对于的key的 国际化做好， <img src="'+t+'" alt="img.png"></p></div><p>1在菜单管理页面点击1 <code>+新增</code>按钮，2选择父级菜单，3填入标题，4填入路由里的 i18nKey: &#39;route.test123&#39;，5 名称填写 name: &#39;test123&#39;,6访问路径填写 path: &#39;/test123&#39;,7选择一个图标，8设置排序，9选择类型，10选择权限，11填写描述，12确认添加 <img src="'+c+'" alt="img.png"></p><p>刷新页面，就会看到这个页面出现在列表里了 <img src="'+o+'" alt="img.png"></p>',27)])])}const v=n(r,[["render",d]]);export{_ as __pageData,v as default};
