import{_ as s,c as a,o as n,ah as e}from"./chunks/framework.BDBjiFeZ.js";const d=JSON.parse('{"title":"Optimization Guide","description":"","frontmatter":{"sidebar_position":7},"headers":[],"relativePath":"en_US/installation/optimization.md","filePath":"en_US/installation/optimization.md"}'),t={name:"en_US/installation/optimization.md"};function l(o,i,r,p,h,k){return n(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="optimization-guide" tabindex="-1">Optimization Guide <a class="header-anchor" href="#optimization-guide" aria-label="Permalink to “Optimization Guide”">​</a></h1><h2 id="_1-system-performance-optimization" tabindex="-1">1. System Performance Optimization <a class="header-anchor" href="#_1-system-performance-optimization" aria-label="Permalink to “1. System Performance Optimization”">​</a></h2><h3 id="_1-1-application-service-optimization" tabindex="-1">1.1 Application Service Optimization <a class="header-anchor" href="#_1-1-application-service-optimization" aria-label="Permalink to “1.1 Application Service Optimization”">​</a></h3><ul><li><p><strong>Backend Service Optimization</strong></p><ul><li>Log Level Adjustment: Recommended to set to WARNING or ERROR in production.</li><li>Concurrent Connection Optimization: Adjust system file descriptor limits.</li><li>API Service Cache Strategy Optimization.</li><li>Batch Data Processing Mechanism Optimization.</li></ul></li><li><p><strong>Message Broker Optimization</strong></p><ul><li>VerneMQ Concurrent Connection Configuration.</li><li>Message Queue Size Adjustment.</li><li>Message Persistence Strategy Optimization.</li><li>Session Cleanup Cycle Configuration.</li></ul></li></ul><h3 id="_1-2-system-resource-optimization" tabindex="-1">1.2 System Resource Optimization <a class="header-anchor" href="#_1-2-system-resource-optimization" aria-label="Permalink to “1.2 System Resource Optimization”">​</a></h3><ul><li><p><strong>Operating System Level</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Adjust system max file descriptors</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fs.file-max=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Adjust system max connections</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net.core.somaxconn=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">65535</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TCP Connection Optimization</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net.ipv4.tcp_max_syn_backlog=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8192</span></span></code></pre></div></li><li><p><strong>Container Resource Configuration</strong></p><ul><li>Reasonably allocate container CPU limits.</li><li>Set appropriate memory limits.</li><li>Configure suitable Docker storage drivers.</li></ul></li></ul><h2 id="_2-database-optimization" tabindex="-1">2. Database Optimization <a class="header-anchor" href="#_2-database-optimization" aria-label="Permalink to “2. Database Optimization”">​</a></h2><h3 id="_2-1-tdengine-optimization" tabindex="-1">2.1 TDengine Optimization <a class="header-anchor" href="#_2-1-tdengine-optimization" aria-label="Permalink to “2.1 TDengine Optimization”">​</a></h3><ul><li><p><strong>System Configuration</strong></p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Adjust write cache size</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 2048</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Optimize query cache</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">queryBufferSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 2048</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Compression level setting</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">comp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 2</span></span></code></pre></div></li><li><p><strong>Data Storage Optimization</strong></p><ul><li>Set reasonable data retention policies.</li><li>Optimize data partitioning strategies.</li><li>Configure data compression ratios.</li></ul></li></ul><h3 id="_2-2-postgresql-timescaledb-optimization" tabindex="-1">2.2 PostgreSQL/TimescaleDB Optimization <a class="header-anchor" href="#_2-2-postgresql-timescaledb-optimization" aria-label="Permalink to “2.2 PostgreSQL/TimescaleDB Optimization”">​</a></h3><ul><li><p><strong>Memory Configuration</strong></p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Shared Buffers</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">shared_buffers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = RAM * 0.25</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Working Memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">work_mem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = RAM * 0.025</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Maintenance Working Memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">maintenance_work_mem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = RAM * 0.05</span></span></code></pre></div></li><li><p><strong>Connection Configuration</strong></p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Max Connections</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">max_connections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 200</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Prepared Transactions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">max_prepared_transactions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = 100</span></span></code></pre></div></li></ul><h3 id="_2-3-redis-optimization" tabindex="-1">2.3 Redis Optimization <a class="header-anchor" href="#_2-3-redis-optimization" aria-label="Permalink to “2.3 Redis Optimization”">​</a></h3><ul><li><p><strong>Memory Management</strong></p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Max Memory Limit</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxmemory 2gb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Memory Policy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxmemory-policy allkeys-lru</span></span></code></pre></div></li><li><p><strong>Persistence Configuration</strong></p><div class="language-properties"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># RDB Config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 900 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 300 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save 60 10000</span></span></code></pre></div></li></ul><h2 id="_3-network-optimization" tabindex="-1">3. Network Optimization <a class="header-anchor" href="#_3-network-optimization" aria-label="Permalink to “3. Network Optimization”">​</a></h2><h3 id="_3-1-load-balancing-optimization" tabindex="-1">3.1 Load Balancing Optimization <a class="header-anchor" href="#_3-1-load-balancing-optimization" aria-label="Permalink to “3.1 Load Balancing Optimization”">​</a></h3><ul><li><p><strong>Nginx Configuration</strong></p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Worker Processes</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">worker_processes </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auto;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Connections per Worker</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">worker_connections </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">65535</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Enable Gzip Compression</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_min_length </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li></ul><h3 id="_3-2-network-transmission-optimization" tabindex="-1">3.2 Network Transmission Optimization <a class="header-anchor" href="#_3-2-network-transmission-optimization" aria-label="Permalink to “3.2 Network Transmission Optimization”">​</a></h3><ul><li>Enable Keep-Alive connections.</li><li>Configure appropriate timeout values.</li><li>Optimize TCP parameters.</li></ul><h2 id="_4-monitoring-tuning-tools" tabindex="-1">4. Monitoring &amp; Tuning Tools <a class="header-anchor" href="#_4-monitoring-tuning-tools" aria-label="Permalink to “4. Monitoring &amp; Tuning Tools”">​</a></h2><h3 id="_4-1-system-monitoring" tabindex="-1">4.1 System Monitoring <a class="header-anchor" href="#_4-1-system-monitoring" aria-label="Permalink to “4.1 System Monitoring”">​</a></h3><ul><li>Use Prometheus + Grafana to monitor system metrics.</li><li>Configure alerts for key metrics.</li><li>Regularly check system performance reports.</li></ul><h3 id="_4-2-performance-analysis-tools" tabindex="-1">4.2 Performance Analysis Tools <a class="header-anchor" href="#_4-2-performance-analysis-tools" aria-label="Permalink to “4.2 Performance Analysis Tools”">​</a></h3><ul><li>CPU Analysis: <code>top</code>, <code>htop</code></li><li>Memory Analysis: <code>free</code>, <code>vmstat</code></li><li>Disk I/O: <code>iostat</code></li><li>Network Performance: <code>netstat</code>, <code>iftop</code></li></ul><h2 id="_5-optimization-workflow" tabindex="-1">5. Optimization Workflow <a class="header-anchor" href="#_5-optimization-workflow" aria-label="Permalink to “5. Optimization Workflow”">​</a></h2><ol><li><p><strong>Performance Benchmarking</strong></p><ul><li>Record current system performance metrics.</li><li>Identify performance bottlenecks.</li></ul></li><li><p><strong>Formulate Optimization Plan</strong></p><ul><li>Prioritize based on monitoring data.</li><li>Evaluate costs and benefits of optimization.</li></ul></li><li><p><strong>Step-by-Step Implementation</strong></p><ul><li>Adjust one parameter at a time.</li><li>Record the effects of adjustments.</li></ul></li><li><p><strong>Verification</strong></p><ul><li>Compare performance before and after optimization.</li><li>Continuously monitor system stability.</li></ul></li></ol><h2 id="_6-precautions" tabindex="-1">6. Precautions <a class="header-anchor" href="#_6-precautions" aria-label="Permalink to “6. Precautions”">​</a></h2><ul><li>Optimization parameters should be adjusted based on actual hardware configuration.</li><li>Backup configurations before adjusting important parameters.</li><li>Production environment adjustments should be verified in a test environment first.</li><li>Maintain system monitoring to detect issues in time.</li></ul><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>The above configuration parameters are for reference only. Please adjust according to specific hardware configuration, business scenarios, and stress test results during actual deployment.</p></div>`,28)])])}const g=s(t,[["render",l]]);export{d as __pageData,g as default};
